@import 'toastify-js/src/toastify.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS Custom Properties - Theme Variables
   ============================================ */

:root {
    /* Light Mode Colors */
    --color-bg-primary: 255 255 255;
    --color-bg-secondary: 248 250 252;
    --color-bg-tertiary: 241 245 249;
    --color-text-primary: 15 23 42;
    --color-text-secondary: 71 85 105;
    --color-text-muted: 148 163 184;
    --color-border: 226 232 240;
    --color-border-light: 241 245 249;
    
    /* Accent Colors */
    --color-accent: 79 70 229;
    --color-accent-light: 129 140 248;
    --color-accent-dark: 67 56 202;
    
    /* Sidebar */
    --sidebar-width: 16rem;
    --sidebar-collapsed-width: 4rem;
}

.dark {
    /* Dark Mode Colors */
    --color-bg-primary: 15 23 42;
    --color-bg-secondary: 30 41 59;
    --color-bg-tertiary: 51 65 85;
    --color-text-primary: 248 250 252;
    --color-text-secondary: 203 213 225;
    --color-text-muted: 148 163 184;
    --color-border: 51 65 85;
    --color-border-light: 71 85 105;
    
    /* Accent Colors - Adjusted for dark mode */
    --color-accent: 129 140 248;
    --color-accent-light: 165 180 252;
    --color-accent-dark: 99 102 241;
}

/* ============================================
   Base Styles
   ============================================ */

@layer base {
    html {
        @apply scroll-smooth;
    }
    
    body {
        @apply bg-surface-50 dark:bg-surface-900 text-surface-900 dark:text-surface-50;
        @apply transition-colors duration-200;
        font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    }
    
    /* Typography */
    h1, h2, h3 {
        @apply font-display font-semibold tracking-tight;
    }
    
    h1 {
        @apply text-3xl sm:text-4xl;
    }
    
    h2 {
        @apply text-2xl sm:text-3xl;
    }
    
    h3 {
        @apply text-xl sm:text-2xl;
    }
    
    h4, h5, h6 {
        @apply font-sans font-semibold;
    }
    
    /* Focus styles */
    *:focus-visible {
        @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-surface-900;
    }
    
    /* Global Form Styles - Apply to all native inputs */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    input[type="search"],
    input[type="date"],
    input[type="datetime-local"],
    input[type="time"],
    input[type="week"],
    input[type="month"],
    textarea,
    select {
        @apply w-full px-4 py-3 rounded-xl text-sm;
        @apply bg-surface-50 dark:bg-surface-800/50;
        @apply border-2 border-surface-200 dark:border-surface-600;
        @apply text-surface-900 dark:text-surface-100;
        @apply placeholder-surface-400 dark:placeholder-surface-500;
        @apply focus:border-primary-500 dark:focus:border-primary-400;
        @apply focus:ring-4 focus:ring-primary-500/10 dark:focus:ring-primary-400/10;
        @apply focus:bg-white dark:focus:bg-surface-800;
        @apply transition-all duration-200;
        @apply shadow-sm;
    }
    
    select {
        border-radius: 1rem !important;
    }

    select {
        @apply pr-10 appearance-none cursor-pointer;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.25em 1.25em;
    }
    
    textarea {
        @apply min-h-[120px] resize-y;
    }
    
    input[type="checkbox"],
    input[type="radio"] {
        @apply w-5 h-5;
        @apply bg-surface-50 dark:bg-surface-800/50;
        @apply border-2 border-surface-300 dark:border-surface-600;
        @apply text-primary-600 dark:text-primary-500;
        @apply focus:ring-2 focus:ring-primary-500/20 dark:focus:ring-primary-400/20;
        @apply focus:ring-offset-0;
        @apply transition-all duration-150;
        @apply cursor-pointer;
    }
    
    input[type="checkbox"] {
        @apply rounded-md;
    }
    
    input[type="radio"] {
        @apply rounded-full;
    }
    
    /* Label styling */
    label {
        @apply text-sm font-medium text-surface-700 dark:text-surface-200;
    }
}

/* ============================================
   Component Styles
   ============================================ */

@layer components {
    /* Sidebar */
    .sidebar {
        @apply fixed left-0 top-0 h-screen w-64 bg-white dark:bg-surface-900;
        @apply border-r border-surface-200 dark:border-surface-700;
        @apply flex flex-col z-40;
        @apply transition-transform duration-300 ease-in-out;
    }
    
    .sidebar-header {
        @apply h-16 flex items-center px-4 border-b border-surface-200 dark:border-surface-700;
    }
    
    .sidebar-nav {
        @apply flex-1 overflow-y-auto py-4 px-3;
    }
    
    .sidebar-footer {
        @apply p-4 border-t border-surface-200 dark:border-surface-700;
    }
    
    .nav-item {
        @apply flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium;
        @apply text-surface-600 dark:text-surface-400;
        @apply hover:bg-surface-100 dark:hover:bg-surface-800;
        @apply hover:text-surface-900 dark:hover:text-surface-100;
        @apply transition-all duration-150;
    }
    
    .nav-item.active {
        @apply bg-primary-50 dark:bg-primary-900/30;
        @apply text-primary-700 dark:text-primary-300;
    }
    
    .nav-item svg {
        @apply w-5 h-5 flex-shrink-0;
    }
    
    /* Main Content Area */
    .main-content {
        @apply ml-0 lg:ml-64 min-h-screen;
        @apply bg-surface-50 dark:bg-surface-900;
        @apply transition-all duration-300;
    }
    
    /* Cards */
    .card {
        @apply bg-white dark:bg-surface-800 rounded-xl;
        @apply border border-surface-200 dark:border-surface-700;
        @apply shadow-soft;
    }
    
    .card-header {
        @apply px-6 py-4 border-b border-surface-200 dark:border-surface-700;
    }
    
    .card-body {
        @apply p-6;
    }
    
    .card-footer {
        @apply px-6 py-4 border-t border-surface-200 dark:border-surface-700;
        @apply bg-surface-50 dark:bg-surface-800/50 rounded-b-xl;
    }
    
    /* Buttons */
    .btn {
        @apply inline-flex items-center justify-center gap-2 px-4 py-2.5;
        @apply text-sm font-medium rounded-lg;
        @apply transition-all duration-150;
        @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
        @apply disabled:opacity-50 disabled:cursor-not-allowed;
    }
    
    .btn-primary {
        @apply bg-primary-600 text-white;
        @apply hover:bg-primary-700;
        @apply focus:ring-primary-500;
    }
    
    .btn-secondary {
        @apply bg-surface-100 dark:bg-surface-700 text-surface-700 dark:text-surface-200;
        @apply hover:bg-surface-200 dark:hover:bg-surface-600;
        @apply focus:ring-surface-500;
    }
    
    .btn-danger {
        @apply bg-red-600 text-white;
        @apply hover:bg-red-700;
        @apply focus:ring-red-500;
    }
    
    .btn-success {
        @apply bg-green-600 text-white;
        @apply hover:bg-green-700;
        @apply focus:ring-green-500;
    }
    
    .btn-ghost {
        @apply bg-transparent text-surface-600 dark:text-surface-400;
        @apply hover:bg-surface-100 dark:hover:bg-surface-800;
        @apply focus:ring-surface-500;
    }
    
    .btn-sm {
        @apply px-3 py-1.5 text-xs;
    }
    
    .btn-lg {
        @apply px-6 py-3 text-base;
    }
    
    /* Form Inputs */
    .form-input {
        @apply w-full px-4 py-3 rounded-xl text-sm;
        @apply bg-surface-50 dark:bg-surface-800/50;
        @apply border-2 border-surface-200 dark:border-surface-600;
        @apply text-surface-900 dark:text-surface-100;
        @apply placeholder-surface-400 dark:placeholder-surface-500;
        @apply focus:border-primary-500 dark:focus:border-primary-400;
        @apply focus:ring-4 focus:ring-primary-500/10 dark:focus:ring-primary-400/10;
        @apply focus:bg-white dark:focus:bg-surface-800;
        @apply transition-all duration-200;
        @apply shadow-sm;
    }
    
    .form-input:disabled {
        @apply bg-surface-100 dark:bg-surface-700/50 cursor-not-allowed opacity-60;
    }
    
    .form-input.error {
        @apply border-red-500 dark:border-red-400;
        @apply focus:ring-red-500/10 dark:focus:ring-red-400/10;
    }
    
    .form-label {
        @apply block text-sm font-medium text-surface-700 dark:text-surface-200 mb-2;
    }
    
    .form-error {
        @apply text-sm text-red-600 dark:text-red-400 mt-1.5;
    }
    
    .form-hint {
        @apply text-sm text-surface-500 dark:text-surface-400 mt-1.5;
    }
    
    /* Select */
    .form-select {
        @apply w-full px-4 py-3 rounded-xl text-sm;
        @apply bg-surface-50 dark:bg-surface-800/50;
        @apply border-2 border-surface-200 dark:border-surface-600;
        @apply text-surface-900 dark:text-surface-100;
        @apply focus:border-primary-500 dark:focus:border-primary-400;
        @apply focus:ring-4 focus:ring-primary-500/10 dark:focus:ring-primary-400/10;
        @apply focus:bg-white dark:focus:bg-surface-800;
        @apply transition-all duration-200;
        @apply shadow-sm;
        @apply pr-10 appearance-none cursor-pointer;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.25em 1.25em;
    }
    
    /* Textarea */
    .form-textarea {
        @apply form-input min-h-[120px] resize-y;
    }
    
    /* Checkbox & Radio */
    .form-checkbox {
        @apply w-5 h-5 rounded-md;
        @apply bg-surface-50 dark:bg-surface-800/50;
        @apply border-2 border-surface-300 dark:border-surface-600;
        @apply text-primary-600 dark:text-primary-500;
        @apply focus:ring-2 focus:ring-primary-500/20 dark:focus:ring-primary-400/20;
        @apply focus:ring-offset-0;
        @apply transition-all duration-150;
        @apply cursor-pointer;
    }
    
    .form-radio {
        @apply form-checkbox rounded-full;
    }
    
    /* Input Group */
    .input-group {
        @apply relative;
    }
    
    .input-group-icon {
        @apply absolute left-4 top-1/2 -translate-y-1/2;
        @apply text-surface-400 dark:text-surface-500;
        @apply pointer-events-none;
    }
    
    .input-group .form-input {
        @apply pl-11;
    }
    
    /* Form Group */
    .form-group {
        @apply mb-5;
    }
    
    .form-group:last-child {
        @apply mb-0;
    }
    
    /* Tables */
    .table-container {
        @apply overflow-x-auto rounded-xl border border-surface-200 dark:border-surface-700;
    }
    
    .table {
        @apply w-full text-sm;
    }
    
    .table thead {
        @apply bg-surface-50 dark:bg-surface-800;
    }
    
    .table th {
        @apply px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider;
        @apply text-surface-500 dark:text-surface-400;
    }
    
    .table td {
        @apply px-6 py-4 text-surface-700 dark:text-surface-300;
    }
    
    .table tbody tr {
        @apply border-t border-surface-200 dark:border-surface-700;
        @apply hover:bg-surface-50 dark:hover:bg-surface-800/50;
        @apply transition-colors duration-150;
    }
    
    .table tbody tr:nth-child(even) {
        @apply bg-surface-50/50 dark:bg-surface-800/30;
    }
    
    /* Badges */
    .badge {
        @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    }
    
    .badge-primary {
        @apply bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300;
    }
    
    .badge-success {
        @apply bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300;
    }
    
    .badge-warning {
        @apply bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300;
    }
    
    .badge-danger {
        @apply bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300;
    }
    
    .badge-info {
        @apply bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300;
    }
    
    /* Theme Toggle */
    .theme-toggle {
        @apply p-2 rounded-lg;
        @apply text-surface-500 dark:text-surface-400;
        @apply hover:bg-surface-100 dark:hover:bg-surface-800;
        @apply hover:text-surface-700 dark:hover:text-surface-200;
        @apply transition-all duration-150;
    }
    
    /* Stat Cards */
    .stat-card {
        @apply card p-6;
    }
    
    .stat-card-icon {
        @apply w-12 h-12 rounded-xl flex items-center justify-center;
    }
    
    .stat-card-value {
        @apply text-2xl font-bold text-surface-900 dark:text-surface-100;
    }
    
    .stat-card-label {
        @apply text-sm text-surface-500 dark:text-surface-400;
    }
    
    /* Dropdown */
    .dropdown {
        @apply absolute right-0 mt-2 w-48 rounded-xl;
        @apply bg-white dark:bg-surface-800;
        @apply border border-surface-200 dark:border-surface-700;
        @apply shadow-lg;
        @apply z-50;
    }
    
    .dropdown-item {
        @apply block px-4 py-2 text-sm;
        @apply text-surface-700 dark:text-surface-300;
        @apply hover:bg-surface-100 dark:hover:bg-surface-700;
        @apply transition-colors duration-150;
    }
    
    .dropdown-item:first-child {
        @apply rounded-t-xl;
    }
    
    .dropdown-item:last-child {
        @apply rounded-b-xl;
    }
    
    /* Page Header */
    .page-header {
        @apply mb-6;
    }
    
    .page-title {
        @apply text-2xl font-display font-bold text-surface-900 dark:text-surface-100;
    }
    
    .page-subtitle {
        @apply text-surface-500 dark:text-surface-400 mt-1;
    }
    
    /* Loading Spinner */
    .spinner {
        @apply animate-spin rounded-full border-2 border-surface-200 dark:border-surface-700;
        @apply border-t-primary-600 dark:border-t-primary-400;
    }
    
    .spinner-sm {
        @apply w-4 h-4;
    }
    
    .spinner-md {
        @apply w-6 h-6;
    }
    
    .spinner-lg {
        @apply w-8 h-8;
    }
}

/* ============================================
   Utility Classes
   ============================================ */

@layer utilities {
    .text-balance {
        text-wrap: balance;
    }
    
    .scrollbar-thin {
        scrollbar-width: thin;
    }
    
    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    
    .scrollbar-thin::-webkit-scrollbar-track {
        @apply bg-surface-100 dark:bg-surface-800;
    }
    
    .scrollbar-thin::-webkit-scrollbar-thumb {
        @apply bg-surface-300 dark:bg-surface-600 rounded-full;
    }
    
    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        @apply bg-surface-400 dark:bg-surface-500;
    }
}

/* ============================================
   Toast Notifications
   ============================================ */

.toastify {
    padding: 0 !important;
    background: none !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
    border-radius: 0.75rem !important;
    max-width: 380px !important;
    min-width: 320px !important;
}

.toast-content {
    display: flex;
    flex-direction: column;
    width: 100%;
}

.toast-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    font-weight: 600;
    font-size: 0.875rem;
}

.toast-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.toast-close {
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0.5;
    font-size: 1rem;
    line-height: 1;
    padding: 0;
    transition: opacity 0.2s;
}

.toast-close:hover {
    opacity: 1;
}

.toast-body {
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    line-height: 1.5;
}

.toast-progress {
    height: 4px;
    width: 100%;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 0 0 0.75rem 0.75rem;
    overflow: hidden;
}

.toast-progress-bar {
    height: 100%;
    width: 100%;
    animation: toast-progress linear forwards;
}

select {
    border-radius: 1rem !important;
}

@keyframes toast-progress {
    from { width: 100%; }
    to { width: 0%; }
}

/* Toast variants */
.toast-success {
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%) !important;
    border: 1px solid #a7f3d0 !important;
}
.toast-success .toast-header { color: #065f46; border-bottom-color: #a7f3d0; }
.toast-success .toast-body { color: #047857; }
.toast-success .toast-close { color: #065f46; }
.toast-success .toast-progress-bar { background: linear-gradient(90deg, #10b981, #059669); }

.toast-error {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%) !important;
    border: 1px solid #fecaca !important;
}
.toast-error .toast-header { color: #991b1b; border-bottom-color: #fecaca; }
.toast-error .toast-body { color: #b91c1c; }
.toast-error .toast-close { color: #991b1b; }
.toast-error .toast-progress-bar { background: linear-gradient(90deg, #ef4444, #dc2626); }

.toast-warning {
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%) !important;
    border: 1px solid #fde68a !important;
}
.toast-warning .toast-header { color: #92400e; border-bottom-color: #fde68a; }
.toast-warning .toast-body { color: #b45309; }
.toast-warning .toast-close { color: #92400e; }
.toast-warning .toast-progress-bar { background: linear-gradient(90deg, #f59e0b, #d97706); }

.toast-info {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%) !important;
    border: 1px solid #bfdbfe !important;
}
.toast-info .toast-header { color: #1e40af; border-bottom-color: #bfdbfe; }
.toast-info .toast-body { color: #1d4ed8; }
.toast-info .toast-close { color: #1e40af; }
.toast-info .toast-progress-bar { background: linear-gradient(90deg, #3b82f6, #2563eb); }

/* Dark mode toast variants */
.dark .toast-success {
    background: linear-gradient(135deg, #064e3b 0%, #065f46 100%) !important;
    border-color: #047857 !important;
}
.dark .toast-success .toast-header { color: #a7f3d0; border-bottom-color: #047857; }
.dark .toast-success .toast-body { color: #6ee7b7; }
.dark .toast-success .toast-close { color: #a7f3d0; }

.dark .toast-error {
    background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%) !important;
    border-color: #b91c1c !important;
}
.dark .toast-error .toast-header { color: #fecaca; border-bottom-color: #b91c1c; }
.dark .toast-error .toast-body { color: #fca5a5; }
.dark .toast-error .toast-close { color: #fecaca; }

.dark .toast-warning {
    background: linear-gradient(135deg, #78350f 0%, #92400e 100%) !important;
    border-color: #b45309 !important;
}
.dark .toast-warning .toast-header { color: #fde68a; border-bottom-color: #b45309; }
.dark .toast-warning .toast-body { color: #fcd34d; }
.dark .toast-warning .toast-close { color: #fde68a; }

.dark .toast-info {
    background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%) !important;
    border-color: #1d4ed8 !important;
}
.dark .toast-info .toast-header { color: #bfdbfe; border-bottom-color: #1d4ed8; }
.dark .toast-info .toast-body { color: #93c5fd; }
.dark .toast-info .toast-close { color: #bfdbfe; }
